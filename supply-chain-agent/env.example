# OpenTelemetry Tracing Configuration
JAEGER_HOST=localhost
JAEGER_PORT=4317

# Market Analysis Agent Configuration
# NOTE: Trailing slash is important! Without it, signature verification will fail
# because @path will be "" vs "/" causing signature base mismatch
MARKET_ANALYSIS_AGENT_URL=http://market-analysis-agent.localhost:3000/


# Market Analysis Agent Timeout Configuration (in seconds)
MARKET_ANALYSIS_CONNECT_TIMEOUT=30.0
MARKET_ANALYSIS_READ_TIMEOUT=120.0
MARKET_ANALYSIS_WRITE_TIMEOUT=30.0
MARKET_ANALYSIS_POOL_TIMEOUT=30.0

# Reduce noisy spans with sampling
OTEL_TRACES_SAMPLER=parentbased_traceidratio
OTEL_TRACES_SAMPLER_ARG=0.1
OTEL_TRACES_SAMPLER_PARENT_BASED=true

# Note: Noisy A2A framework spans (dequeue_event, etc.) are automatically filtered out

# Supply Chain Agent Configuration
# The port this agent runs on (default: 9999)
SUPPLY_CHAIN_AGENT_PORT=9999

# Optional: Override the agent's own URL for external access
# This is where the locally running process will listen
SUPPLY_CHAIN_AGENT_URL=http://localhost:9999/

# AAuth Configuration
# Signature scheme: "hwk" (pseudonymous) or "jwks" (identified agent)
# Default: hwk (maintains backward compatibility)
AAUTH_SIGNATURE_SCHEME=jwks
# Agent identifier for JWKS scheme (HTTPS URL)
# Used in Signature-Key header: scheme=jwks id="<SUPPLY_CHAIN_AGENT_ID_URL>" kid="..."
# Also used to derive canonical authority for signature verification (per SPEC 10.3.1)
# Canonical authority format: host:port (if port is non-default) or just host (if default port)
# If not set, derived from SUPPLY_CHAIN_AGENT_URL or agent_card.url
SUPPLY_CHAIN_AGENT_ID_URL=http://supply-chain-agent.localhost:3000

# Authorization scheme: "autonomous" (policy-based), "user-delegated" (user consent), or "signature-only" (JWKS/HWK verification only)
# Default: autonomous
# - autonomous: requires scheme=jwt with valid auth_token; HWK accepted without challenge; JWKS triggers resource_token
# - user-delegated: same as autonomous; use AAUTH_RESOURCE_ADDITIONAL_SCOPES for extra scopes (e.g. email)
# - signature-only: accept any request with valid signature (HWK or JWKS); no auth_token or resource_token flow
AAUTH_AUTHORIZATION_SCHEME=autonomous

# Resource token scope: only used when AAUTH_AUTHORIZATION_SCHEME=user-delegated.
# Adds scopes to the base "supply-chain:optimize" scope. Ignored when not user-delegated.
# Space-separated list, e.g. "email".
# AAUTH_RESOURCE_ADDITIONAL_SCOPES=email
AAUTH_RESOURCE_ADDITIONAL_SCOPES=

# Keycloak AAuth Configuration (for autonomous authorization and token exchange)
# AAuth issuer URL - used to verify auth tokens, issue resource tokens, and perform token exchange
# If not set, derived from KEYCLOAK_URL and KEYCLOAK_REALM
KEYCLOAK_AAUTH_ISSUER_URL=http://localhost:8080/realms/aauth-test
# Optional: Full URL to agent_token_endpoint (can be derived from issuer URL)
# KEYCLOAK_AAUTH_AGENT_TOKEN_ENDPOINT=http://localhost:8080/realms/aauth-test/protocol/aauth/agent/token
# Keycloak URL and realm (fallback if KEYCLOAK_AAUTH_ISSUER_URL not set)
KEYCLOAK_URL=http://localhost:8080
KEYCLOAK_REALM=aauth-test

# Environment
ENVIRONMENT=development

# Logging Configuration
# LOG_LEVEL: Set logging level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
# If LOG_LEVEL is not set, DEBUG flag controls logging level
LOG_LEVEL=info
# DEBUG: Set to 'true' to enable verbose debug statements (used for conditional debug logging)
DEBUG=false


# Console Trace Span Logging Control
# Set to 'false' to disable all console trace span logging while keeping tracing functionality
# This is useful for production environments where you want tracing but not console output
ENABLE_CONSOLE_EXPORTER=true
